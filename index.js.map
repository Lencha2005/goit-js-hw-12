{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const creatGalleryCard = imgInfo => {\n    return `\n    <li class=\"gallery-card\">\n    <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n    </a>\n    <ul class=\"list-info\">\n    <li class=\"item-info\">\n    <p class=\"item-text-info\">Likes</p>\n    <p class=\"item-text-value\">${imgInfo.likes}</p>\n    </li>\n    <li class=\"item-info\">\n    <p class=\"item-text-info\">Views</p>\n    <p class=\"item-text-value\">${imgInfo.views}</p>\n    </li>\n    <li class=\"item-info\">\n    <p class=\"item-text-info\">Comments</p>\n    <p class=\"item-text-value\">${imgInfo.comments}</p>\n    </li>\n    <li class=\"item-info\">\n    <p class=\"item-text-info\">Download</p>\n    <p class=\"item-text-value\">${imgInfo.downloads}</p>\n    </li>\n    </ul>\n    </li>`\n};","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nexport const formSearchEl = document.querySelector('.js-form-search');\nexport const galleryList = document.querySelector('.list-gallery');\nexport const loader = document.querySelector('.js-loader');\n\nexport function fetchPhotos(inputValue, page) {\n    \n    formSearchEl.reset();\n    loader.classList.remove('is-hidden');\n\n    const axiosOptions = {\n        params: {\n        key:'45478018-6810a6814d3c626f27e622ce2',\n        q: inputValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n        },\n    };\n\nreturn axios.get('', axiosOptions);\n}\n","import {creatGalleryCard} from './js/render-functions';\nimport {fetchPhotos, loader, galleryList, formSearchEl} from './js/pixabay-api';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst btnLoadMoreEl = document.querySelector('.js-btn-load-more');\n\nlet currentPage = 1;\nlet inputValue = '';\nlet cardHeight = 0;\n\n\nasync function onFormSearchSubmit(event){\n    try {\n        event.preventDefault();\n\n        currentPage = 1;\n\n        inputValue = formSearchEl.elements.user_query.value.trim();\n\n        const response = await fetchPhotos(inputValue, currentPage);\n        console.log(response.data);\n\n        if (response.data.hits.length === 0 || inputValue === ''){\n            galleryList.innerHTML = '';\n            iziToast.error({\n                title: 'Error',\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            \n            return;\n        };\n\n        const galleryCardsTemplate = response.data.hits\n        .map(img => creatGalleryCard(img))\n        .join('');\n\n        galleryList.innerHTML = galleryCardsTemplate;\n\n        const galleryCardEl = document.querySelector('LI');\n        cardHeight = galleryCardEl.getBoundingClientRect().height;\n\n        btnLoadMoreEl.classList.remove('is-hidden');\n\n    lightbox.refresh();\n    }  catch(err) {\n        console.log(err)\n    } finally {\n        loader.classList.add('is-hidden');\n    };\n};\n\nasync function onBtnLoadMoreClick(event) {\n    try{\n        btnLoadMoreEl.classList.add('is-hidden')\n        loader.classList.remove('is-hidden');\n        currentPage++;\n\n        const response = await fetchPhotos(inputValue, currentPage);\n\n        const galleryCardsTemplate = response.data.hits\n        .map(img => creatGalleryCard(img))\n        .join('');\n\n        galleryList.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n        scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n\n        btnLoadMoreEl.classList.remove('is-hidden')\n        loader.classList.add('is-hidden');\n\n        const totalPages = Math.ceil(response.data.totalHits / 15);\n\n        if (currentPage === totalPages) {\n            btnLoadMoreEl.classList.add('is-hidden');\n            iziToast.info({\n                position: 'topRight',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n            return;\n          }\n\n        lightbox.refresh();\n\n    } catch (err){\n        console.log(err)\n    } finally {\n        loader.classList.add('is-hidden');\n    };\n};\n\nformSearchEl.addEventListener('submit', onFormSearchSubmit);\nbtnLoadMoreEl.addEventListener('click', onBtnLoadMoreClick);\n\nconst lightbox = new SimpleLightbox('.list-gallery a', { \n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlayOpacity: 0.8\n});"],"names":["creatGalleryCard","imgInfo","axios","formSearchEl","galleryList","loader","fetchPhotos","inputValue","page","axiosOptions","btnLoadMoreEl","currentPage","cardHeight","onFormSearchSubmit","event","response","iziToast","galleryCardsTemplate","img","lightbox","err","onBtnLoadMoreClick","totalPages","SimpleLightbox"],"mappings":"owBAAO,MAAMA,EAAmBC,GACrB;AAAA;AAAA,oCAEyBA,EAAQ,aAAa;AAAA,oCACrBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,iCAK7CA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,iCAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,iCAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,iCAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA,WCnBlDC,EAAM,SAAS,QAAU,2BAClB,MAAMC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,YAAY,EAElD,SAASC,EAAYC,EAAYC,EAAM,CAE1CL,EAAa,MAAK,EAClBE,EAAO,UAAU,OAAO,WAAW,EAEnC,MAAMI,EAAe,CACjB,OAAQ,CACR,IAAI,qCACJ,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACT,CACT,EAEA,OAAON,EAAM,IAAI,GAAIO,CAAY,CACjC,CClBA,MAAMC,EAAgB,SAAS,cAAc,mBAAmB,EAEhE,IAAIC,EAAc,EACdJ,EAAa,GACbK,EAAa,EAGjB,eAAeC,EAAmBC,EAAM,CACpC,GAAI,CACAA,EAAM,eAAc,EAEpBH,EAAc,EAEdJ,EAAaJ,EAAa,SAAS,WAAW,MAAM,KAAI,EAExD,MAAMY,EAAW,MAAMT,EAAYC,EAAYI,CAAW,EAG1D,GAFA,QAAQ,IAAII,EAAS,IAAI,EAErBA,EAAS,KAAK,KAAK,SAAW,GAAKR,IAAe,GAAG,CACrDH,EAAY,UAAY,GACxBY,EAAS,MAAM,CACX,MAAO,QACP,SAAU,WACV,QAAS,0EACzB,CAAa,EAED,MACZ,CAEQ,MAAMC,EAAuBF,EAAS,KAAK,KAC1C,IAAIG,GAAOlB,EAAiBkB,CAAG,CAAC,EAChC,KAAK,EAAE,EAERd,EAAY,UAAYa,EAGxBL,EADsB,SAAS,cAAc,IAAI,EACtB,sBAAuB,EAAC,OAEnDF,EAAc,UAAU,OAAO,WAAW,EAE9CS,EAAS,QAAO,CACf,OAAQC,EAAK,CACV,QAAQ,IAAIA,CAAG,CACvB,QAAc,CACNf,EAAO,UAAU,IAAI,WAAW,CACxC,CACA,CAEA,eAAegB,EAAmBP,EAAO,CACrC,GAAG,CACCJ,EAAc,UAAU,IAAI,WAAW,EACvCL,EAAO,UAAU,OAAO,WAAW,EACnCM,IAEA,MAAMI,EAAW,MAAMT,EAAYC,EAAYI,CAAW,EAEpDM,EAAuBF,EAAS,KAAK,KAC1C,IAAIG,GAAOlB,EAAiBkB,CAAG,CAAC,EAChC,KAAK,EAAE,EAERd,EAAY,mBAAmB,YAAaa,CAAoB,EAEhE,SAAS,CACL,IAAKL,EAAa,EAClB,SAAU,QACtB,CAAW,EAEHF,EAAc,UAAU,OAAO,WAAW,EAC1CL,EAAO,UAAU,IAAI,WAAW,EAEhC,MAAMiB,EAAa,KAAK,KAAKP,EAAS,KAAK,UAAY,EAAE,EAEzD,GAAIJ,IAAgBW,EAAY,CAC5BZ,EAAc,UAAU,IAAI,WAAW,EACvCM,EAAS,KAAK,CACV,SAAU,WACV,QAAS,4DACzB,CAAa,EACD,MACD,CAEHG,EAAS,QAAO,CAEnB,OAAQC,EAAI,CACT,QAAQ,IAAIA,CAAG,CACvB,QAAc,CACNf,EAAO,UAAU,IAAI,WAAW,CACxC,CACA,CAEAF,EAAa,iBAAiB,SAAUU,CAAkB,EAC1DH,EAAc,iBAAiB,QAASW,CAAkB,EAE1D,MAAMF,EAAW,IAAII,EAAe,kBAAmB,CACnD,SAAU,GACV,aAAc,MACd,aAAc,IACd,eAAgB,EACpB,CAAC"}